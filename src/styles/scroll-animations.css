/* ðŸŒŸ SCROLL-DRIVEN ANIMATIONS - Modern CSS Magic */

/* ===== 1. OPTIMIZED FEATURE CARD REVEALS ===== */
.scroll-stagger-cards {
  & > * {
    opacity: 0;
    transform: translate3d(0, 40px, 0) rotateX(15deg) scale(0.9);
    will-change: opacity, transform;
    transition: opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    
    &.animate-in {
      opacity: 1;
      transform: translate3d(0, 0, 0) rotateX(0deg) scale(1);
    }
  }

  /* Staggered delays for multiple cards */
  & > *:nth-child(1) { 
    transition-delay: 0.1s;
    animation-delay: 0.1s; 
  }
  & > *:nth-child(2) { 
    transition-delay: 0.2s;
    animation-delay: 0.2s; 
  }
  & > *:nth-child(3) { 
    transition-delay: 0.3s;
    animation-delay: 0.3s; 
  }
  & > *:nth-child(4) { 
    transition-delay: 0.4s;
    animation-delay: 0.4s; 
  }
  & > *:nth-child(5) { 
    transition-delay: 0.5s;
    animation-delay: 0.5s; 
  }
  & > *:nth-child(6) { 
    transition-delay: 0.6s;
    animation-delay: 0.6s; 
  }
}

@keyframes card-reveal {
  from {
    opacity: 0;
    transform: translateY(40px) scale(0.95);
    filter: blur(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

/* ===== 2. OPTIMIZED HERO STATS COUNTER ===== */
.stats-counter {
  .hero__stat {
    opacity: 0;
    transform: translate3d(0, 30px, 0) rotateY(90deg) scale(0.8);
    will-change: opacity, transform;
    transition: opacity 1s cubic-bezier(0.34, 1.56, 0.64, 1),
                transform 1s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  
  &.animate-in .hero__stat {
    opacity: 1;
    transform: translate3d(0, 0, 0) rotateY(0deg) scale(1);
    
    &:nth-child(1) { transition-delay: 0.1s; }
    &:nth-child(2) { transition-delay: 0.2s; }
    &:nth-child(3) { transition-delay: 0.3s; }
  }
}

.stats-counter .hero__stat-number {
  will-change: transform;
}

.stats-counter.animate-in .hero__stat-number {
  animation: optimized-count 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.4s both;
}

@keyframes optimized-count {
  0% { transform: scale(0.3) rotateZ(-180deg); }
  70% { transform: scale(1.1) rotateZ(0deg); }
  100% { transform: scale(1) rotateZ(0deg); }
}

@keyframes counter-reveal {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes count-up {
  from {
    opacity: 0.3;
    transform: scale(0.8);
    filter: blur(2px);
  }
  to {
    opacity: 1;
    transform: scale(1);
    filter: blur(0);
  }
}

/* ===== 3. OPTIMIZED SECTION TITLE REVEALS ===== */
.scroll-title-reveal {
  opacity: 0;
  transform: translate3d(0, 50px, 0) scale(1.1);
  will-change: opacity, transform;
  transition: opacity 1.2s cubic-bezier(0.19, 1, 0.22, 1),
              transform 1.2s cubic-bezier(0.19, 1, 0.22, 1);
  
  &.animate-in {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
  }
}

@keyframes title-reveal {
  from {
    opacity: 0;
    transform: translateY(30px);
    filter: blur(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

/* ===== 4. CODE BLOCK LINE-BY-LINE ANIMATION ===== */
.code-scroll-reveal {
  overflow: hidden;
}

.code-scroll-reveal .hero__code-line {
  opacity: 0;
  transform: translateX(-20px);
  animation: code-line-reveal ease-out both;
  animation-timeline: view();
  animation-range: entry 0% entry 90%;
}

/* Staggered line reveals */
.hero__code-line:nth-child(1) { animation-delay: 0.1s; }
.hero__code-line:nth-child(2) { animation-delay: 0.2s; }
.hero__code-line:nth-child(3) { animation-delay: 0.3s; }
.hero__code-line:nth-child(4) { animation-delay: 0.4s; }
.hero__code-line:nth-child(5) { animation-delay: 0.5s; }

@keyframes code-line-reveal {
  from {
    opacity: 0;
    transform: translateX(-20px);
    filter: blur(2px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
    filter: blur(0);
  }
}

/* ===== 5. 2026 QUANTUM SCROLL PROGRESS ===== */
.scroll-progress {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(
    90deg,
    var(--color-primary) 0%,
    var(--color-accent) 30%,
    var(--color-secondary) 60%,
    var(--color-primary) 100%
  );
  background-size: 200% 100%;
  transform-origin: 0% 50%;
  transform: scaleX(0);
  animation: progress-bar linear both, 
             progress-shimmer 3s cubic-bezier(0.25, 1, 0.5, 1) infinite;
  animation-timeline: scroll(root), auto;
  z-index: 1000;
  border-radius: 0 0 1px 1px;
  box-shadow: 0 0 10px oklch(from var(--color-primary) l c h / 0.3);
  will-change: transform;
  backface-visibility: hidden;
}

@keyframes progress-bar {
  from { transform: scaleX(0); }
  to { transform: scaleX(1); }
}

@keyframes progress-shimmer {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* ===== 6. 2026 QUANTUM PARALLAX SYSTEM ===== */
.parallax-float {
  will-change: transform;
  backface-visibility: hidden;
  animation: quantum-float-gentle linear both;
  animation-timeline: scroll(root);
}

.parallax-float--slow {
  will-change: transform;
  backface-visibility: hidden;
  animation: quantum-float-slow linear both;
  animation-timeline: scroll(root);
}

.parallax-float--reverse {
  will-change: transform;
  backface-visibility: hidden;
  animation: quantum-float-reverse linear both;
  animation-timeline: scroll(root);
}

/* Ultra-smooth floating keyframes */
@keyframes quantum-float-gentle {
  from { transform: translate3d(0, 0, 0) rotate(0deg) scale(1); }
  to { transform: translate3d(0, -30px, 0) rotate(3deg) scale(1.02); }
}

@keyframes quantum-float-slow {
  from { transform: translate3d(0, 0, 0) scale(1) rotateZ(0deg); }
  to { transform: translate3d(0, -20px, 0) scale(1.03) rotateZ(2deg); }
}

@keyframes quantum-float-reverse {
  from { transform: translate3d(0, 0, 0) rotate(0deg); }
  to { transform: translate3d(0, 15px, 0) rotate(-2deg); }
}

/* ===== 7. MAGNETIC BUTTON HOVER ON SCROLL ===== */
.magnetic-scroll {
  animation: magnetic-approach ease-out both;
  animation-timeline: view();
  animation-range: entry 0% entry 100%;
}

@keyframes magnetic-approach {
  from {
    transform: scale(0.95);
    box-shadow: var(--shadow-sm);
  }
  to {
    transform: scale(1);
    box-shadow: var(--shadow-lg), 0 0 20px oklch(from var(--color-primary) l c h / 0.3);
  }
}

/* ===== 8. ROTATING BORDER ACCELERATION ===== */
.rotating-border-scroll {
  --rotation-speed: 4s;
  animation-duration: var(--rotation-speed);
  animation-timeline: view();
}

.rotating-border-scroll:in-view {
  --rotation-speed: 2s; /* Speed up when visible */
}

/* ===== 4. OPTIMIZED COMPILER DEMO ===== */
.compiler-demo-animate {
  .compiler-demo__content {
    opacity: 0;
    transform: translate3d(0, 60px, 0) rotateX(20deg);
    will-change: opacity, transform;
    transition: opacity 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
  
  &.animate-in .compiler-demo__content {
    opacity: 1;
    transform: translate3d(0, 0, 0) rotateX(0deg);
  }
  
  .compiler-demo__stat-card {
    opacity: 0;
    transform: translate3d(-50px, 0, 0) rotateZ(-5deg) scale(0.8);
    will-change: opacity, transform;
    transition: opacity 1s cubic-bezier(0.68, -0.55, 0.265, 1.55),
                transform 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
  
  &.animate-in .compiler-demo__stat-card {
    opacity: 1;
    transform: translate3d(0, 0, 0) rotateZ(0deg) scale(1);
    
    &:nth-child(1) { transition-delay: 0.1s; }
    &:nth-child(2) { transition-delay: 0.2s; }
    &:nth-child(3) { transition-delay: 0.3s; }
    &:nth-child(4) { transition-delay: 0.4s; }
  }
}

/* ===== 10. SHOWCASE CARDS PREMIUM REVEAL ===== */
.showcase-reveal {
  opacity: 0;
  transform: translateY(50px) rotateX(15deg);
  animation: showcase-3d-reveal ease-out both;
  animation-timeline: view();
  animation-range: entry 0% entry 70%;
}

@keyframes showcase-3d-reveal {
  from {
    opacity: 0;
    transform: translateY(50px) rotateX(15deg);
    filter: blur(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0) rotateX(0deg);
    filter: blur(0);
  }
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */
@media (prefers-reduced-motion: reduce) {
  .scroll-stagger-cards > *,
  .stats-counter,
  .scroll-title-reveal,
  .code-scroll-reveal .hero__code-line,
  .magnetic-scroll,
  .compiler-stats-reveal,
  .showcase-reveal {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
    filter: none !important;
  }
  
  .scroll-progress {
    display: none;
  }
}

/* Enhanced for modern browsers */
@supports (animation-timeline: view()) {
  .scroll-enhanced {
    will-change: transform, opacity, filter;
  }
}

/* Fallback for browsers without scroll-driven animations */
@supports not (animation-timeline: view()) {
  .scroll-stagger-cards > *,
  .stats-counter,
  .scroll-title-reveal,
  .showcase-reveal {
    opacity: 1 !important;
    transform: none !important;
    filter: none !important;
  }
}

/* ===== 0. 2026 ULTRA-SMOOTH HERO ENTRANCE ===== */
.hero-epic-entrance {
  /* Quantum-smooth morphing badge */
  .hero__badge {
    opacity: 0;
    transform: translate3d(0, -20px, 0) scale(0.6) rotateZ(-90deg);
    will-change: opacity, transform;
    transition: opacity 0.9s cubic-bezier(0.16, 1, 0.3, 1),
                transform 0.9s cubic-bezier(0.16, 1, 0.3, 1);
    backface-visibility: hidden;
    transform-style: preserve-3d;
  }
  
  /* Liquid-smooth title reveal */
  .hero__title {
    opacity: 0;
    transform: translate3d(0, 30px, 0) scale(0.95);
    will-change: opacity, transform;
    transition: opacity 1.1s cubic-bezier(0.25, 1, 0.5, 1) 0.1s,
                transform 1.1s cubic-bezier(0.25, 1, 0.5, 1) 0.1s;
    backface-visibility: hidden;
    
    /* Hyper-smooth accent slide */
    .hero__title-accent {
      transform: translate3d(-60px, 0, 0) skewX(-8deg);
      will-change: transform;
      transition: transform 1.3s cubic-bezier(0.19, 1, 0.22, 1) 0.2s;
      backface-visibility: hidden;
    }
  }
  
  /* Buttery-smooth description */
  .hero__description {
    opacity: 0;
    transform: translate3d(0, 25px, 0) rotateX(15deg);
    will-change: opacity, transform;
    transition: opacity 1s cubic-bezier(0.23, 1, 0.32, 1) 0.3s,
                transform 1s cubic-bezier(0.23, 1, 0.32, 1) 0.3s;
    backface-visibility: hidden;
  }
  
  /* Silk-smooth actions */
  .hero__actions {
    opacity: 0;
    transform: translate3d(0, 30px, 0) scale(0.85);
    will-change: opacity, transform;
    transition: opacity 1s cubic-bezier(0.25, 1, 0.5, 1) 0.4s,
                transform 1s cubic-bezier(0.25, 1, 0.5, 1) 0.4s;
    backface-visibility: hidden;
    
    .hero__cta, .hero__demo {
      transform: rotateY(30deg);
      will-change: transform;
      transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.6s;
      backface-visibility: hidden;
    }
  }
  
  /* Glass-smooth code preview */
  .hero__code-preview {
    opacity: 0;
    transform: translate3d(40px, 0, 0) rotateY(-20deg) scale(0.8);
    will-change: opacity, transform;
    transition: opacity 1.2s cubic-bezier(0.25, 1, 0.5, 1) 0.2s,
                transform 1.2s cubic-bezier(0.25, 1, 0.5, 1) 0.2s;
    backface-visibility: hidden;
    transform-style: preserve-3d;
  }
  
  /* Stats container - quantum smooth */
  .hero__stats {
    opacity: 0;
    transform: translate3d(0, 20px, 0) scale(0.9);
    will-change: opacity, transform;
    transition: opacity 0.9s cubic-bezier(0.25, 1, 0.5, 1) 0.5s,
                transform 0.9s cubic-bezier(0.25, 1, 0.5, 1) 0.5s;
    backface-visibility: hidden;
  }
  
  /* 2026 Activation State - Hyper Smooth */
  &.animate-in {
    .hero__badge {
      opacity: 1;
      transform: translate3d(0, 0, 0) scale(1) rotateZ(0deg);
    }
    
    .hero__title {
      opacity: 1;
      transform: translate3d(0, 0, 0) scale(1);
      
      .hero__title-accent {
        transform: translate3d(0, 0, 0) skewX(0deg);
      }
    }
    
    .hero__description {
      opacity: 1;
      transform: translate3d(0, 0, 0) rotateX(0deg);
    }
    
    .hero__actions {
      opacity: 1;
      transform: translate3d(0, 0, 0) scale(1);
      
      .hero__cta, .hero__demo {
        transform: rotateY(0deg);
      }
    }
    
    .hero__code-preview {
      opacity: 1;
      transform: translate3d(0, 0, 0) rotateY(0deg) scale(1);
    }
    
    .hero__stats {
      opacity: 1;
      transform: translate3d(0, 0, 0) scale(1);
    }
  }
}

/* ===== 2026 FLOATING MICRO-INTERACTIONS ===== */
.hero-epic-entrance.animate-in {
  /* Micro hover breathing effect */
  .hero__badge {
    animation: quantum-breathe 4s cubic-bezier(0.25, 1, 0.5, 1) infinite 1s;
  }
  
  /* Subtle title glow pulse */
  .hero__title-accent {
    animation: accent-glow 6s cubic-bezier(0.25, 1, 0.5, 1) infinite 2s;
  }
  
  /* Code preview gentle float */
  .hero__code-preview {
    animation: gentle-float 8s cubic-bezier(0.25, 1, 0.5, 1) infinite 3s;
  }
}

@keyframes quantum-breathe {
  0%, 100% { transform: translate3d(0, 0, 0) scale(1) rotateZ(0deg); }
  50% { transform: translate3d(0, -2px, 0) scale(1.02) rotateZ(1deg); }
}

@keyframes accent-glow {
  0%, 100% { filter: brightness(1) saturate(1); }
  50% { filter: brightness(1.1) saturate(1.2); }
}

@keyframes gentle-float {
  0%, 100% { transform: translate3d(0, 0, 0) rotateY(0deg) scale(1); }
  33% { transform: translate3d(0, -3px, 0) rotateY(1deg) scale(1.01); }
  66% { transform: translate3d(0, -1px, 0) rotateY(-0.5deg) scale(1.005); }
}