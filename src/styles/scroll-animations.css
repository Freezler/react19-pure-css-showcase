/* ðŸŒŸ SCROLL-DRIVEN ANIMATIONS - Modern CSS Magic */

/* ===== 1. OPTIMIZED FEATURE CARD REVEALS ===== */
.scroll-stagger-cards {
  & > * {
    opacity: 0;
    transform: translate3d(0, 40px, 0) rotateX(15deg) scale(0.9);
    will-change: opacity, transform;
    transition: opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    
    &.animate-in {
      opacity: 1;
      transform: translate3d(0, 0, 0) rotateX(0deg) scale(1);
    }
  }

  /* Staggered delays for multiple cards */
  & > *:nth-child(1) { 
    transition-delay: 0.1s;
    animation-delay: 0.1s; 
  }
  & > *:nth-child(2) { 
    transition-delay: 0.2s;
    animation-delay: 0.2s; 
  }
  & > *:nth-child(3) { 
    transition-delay: 0.3s;
    animation-delay: 0.3s; 
  }
  & > *:nth-child(4) { 
    transition-delay: 0.4s;
    animation-delay: 0.4s; 
  }
  & > *:nth-child(5) { 
    transition-delay: 0.5s;
    animation-delay: 0.5s; 
  }
  & > *:nth-child(6) { 
    transition-delay: 0.6s;
    animation-delay: 0.6s; 
  }
}

@keyframes card-reveal {
  from {
    opacity: 0;
    transform: translateY(40px) scale(0.95);
    filter: blur(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

/* ===== 2. OPTIMIZED HERO STATS COUNTER ===== */
.stats-counter {
  .hero__stat {
    opacity: 0;
    transform: translate3d(0, 30px, 0) rotateY(90deg) scale(0.8);
    will-change: opacity, transform;
    transition: opacity 1s cubic-bezier(0.34, 1.56, 0.64, 1),
                transform 1s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  
  &.animate-in .hero__stat {
    opacity: 1;
    transform: translate3d(0, 0, 0) rotateY(0deg) scale(1);
    
    &:nth-child(1) { transition-delay: 0.1s; }
    &:nth-child(2) { transition-delay: 0.2s; }
    &:nth-child(3) { transition-delay: 0.3s; }
  }
}

.stats-counter .hero__stat-number {
  will-change: transform;
  
  .stats-counter.animate-in & {
    animation: optimized-count 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.4s both;
  }
}

@keyframes optimized-count {
  0% { transform: scale(0.3) rotateZ(-180deg); }
  70% { transform: scale(1.1) rotateZ(0deg); }
  100% { transform: scale(1) rotateZ(0deg); }
}

@keyframes counter-reveal {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes count-up {
  from {
    opacity: 0.3;
    transform: scale(0.8);
    filter: blur(2px);
  }
  to {
    opacity: 1;
    transform: scale(1);
    filter: blur(0);
  }
}

/* ===== 3. OPTIMIZED SECTION TITLE REVEALS ===== */
.scroll-title-reveal {
  opacity: 0;
  transform: translate3d(0, 50px, 0) scale(1.1);
  will-change: opacity, transform;
  transition: opacity 1.2s cubic-bezier(0.19, 1, 0.22, 1),
              transform 1.2s cubic-bezier(0.19, 1, 0.22, 1);
  
  &.animate-in {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
  }
}

@keyframes title-reveal {
  from {
    opacity: 0;
    transform: translateY(30px);
    filter: blur(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

/* ===== 4. CODE BLOCK LINE-BY-LINE ANIMATION ===== */
.code-scroll-reveal {
  overflow: hidden;
}

.code-scroll-reveal .hero__code-line {
  opacity: 0;
  transform: translateX(-20px);
  animation: code-line-reveal ease-out both;
  animation-timeline: view();
  animation-range: entry 0% entry 90%;
}

/* Staggered line reveals */
.hero__code-line:nth-child(1) { animation-delay: 0.1s; }
.hero__code-line:nth-child(2) { animation-delay: 0.2s; }
.hero__code-line:nth-child(3) { animation-delay: 0.3s; }
.hero__code-line:nth-child(4) { animation-delay: 0.4s; }
.hero__code-line:nth-child(5) { animation-delay: 0.5s; }

@keyframes code-line-reveal {
  from {
    opacity: 0;
    transform: translateX(-20px);
    filter: blur(2px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
    filter: blur(0);
  }
}

/* ===== 5. SCROLL PROGRESS INDICATOR ===== */
.scroll-progress {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(
    90deg,
    var(--color-primary) 0%,
    var(--color-accent) 50%,
    var(--color-secondary) 100%
  );
  transform-origin: 0% 50%;
  transform: scaleX(0);
  animation: progress-bar linear both;
  animation-timeline: scroll(root);
  z-index: 1000;
  border-radius: 0 0 2px 2px;
}

@keyframes progress-bar {
  from { transform: scaleX(0); }
  to { transform: scaleX(1); }
}

/* ===== 6. ENHANCED PARALLAX FLOATING ELEMENTS ===== */
.parallax-float {
  animation: float-gentle linear both;
  animation-timeline: scroll(root);
}

.parallax-float--slow {
  animation: float-slow linear both;
  animation-timeline: scroll(root);
}

.parallax-float--reverse {
  animation: float-reverse linear both;
  animation-timeline: scroll(root);
}

@keyframes float-gentle {
  from { transform: translateY(0px) rotate(0deg); }
  to { transform: translateY(-50px) rotate(5deg); }
}

@keyframes float-slow {
  from { transform: translateY(0px) scale(1); }
  to { transform: translateY(-30px) scale(1.05); }
}

@keyframes float-reverse {
  from { transform: translateY(0px) rotate(0deg); }
  to { transform: translateY(20px) rotate(-3deg); }
}

/* ===== 7. MAGNETIC BUTTON HOVER ON SCROLL ===== */
.magnetic-scroll {
  animation: magnetic-approach ease-out both;
  animation-timeline: view();
  animation-range: entry 0% entry 100%;
}

@keyframes magnetic-approach {
  from {
    transform: scale(0.95);
    box-shadow: var(--shadow-sm);
  }
  to {
    transform: scale(1);
    box-shadow: var(--shadow-lg), 0 0 20px oklch(from var(--color-primary) l c h / 0.3);
  }
}

/* ===== 8. ROTATING BORDER ACCELERATION ===== */
.rotating-border-scroll {
  --rotation-speed: 4s;
  animation-duration: var(--rotation-speed);
  animation-timeline: view();
}

.rotating-border-scroll:in-view {
  --rotation-speed: 2s; /* Speed up when visible */
}

/* ===== 4. OPTIMIZED COMPILER DEMO ===== */
.compiler-demo-animate {
  .compiler-demo__content {
    opacity: 0;
    transform: translate3d(0, 60px, 0) rotateX(20deg);
    will-change: opacity, transform;
    transition: opacity 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
  
  &.animate-in .compiler-demo__content {
    opacity: 1;
    transform: translate3d(0, 0, 0) rotateX(0deg);
  }
  
  .compiler-demo__stat-card {
    opacity: 0;
    transform: translate3d(-50px, 0, 0) rotateZ(-5deg) scale(0.8);
    will-change: opacity, transform;
    transition: opacity 1s cubic-bezier(0.68, -0.55, 0.265, 1.55),
                transform 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
  
  &.animate-in .compiler-demo__stat-card {
    opacity: 1;
    transform: translate3d(0, 0, 0) rotateZ(0deg) scale(1);
    
    &:nth-child(1) { transition-delay: 0.1s; }
    &:nth-child(2) { transition-delay: 0.2s; }
    &:nth-child(3) { transition-delay: 0.3s; }
    &:nth-child(4) { transition-delay: 0.4s; }
  }
}

/* ===== 10. SHOWCASE CARDS PREMIUM REVEAL ===== */
.showcase-reveal {
  opacity: 0;
  transform: translateY(50px) rotateX(15deg);
  animation: showcase-3d-reveal ease-out both;
  animation-timeline: view();
  animation-range: entry 0% entry 70%;
}

@keyframes showcase-3d-reveal {
  from {
    opacity: 0;
    transform: translateY(50px) rotateX(15deg);
    filter: blur(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0) rotateX(0deg);
    filter: blur(0);
  }
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */
@media (prefers-reduced-motion: reduce) {
  .scroll-stagger-cards > *,
  .stats-counter,
  .scroll-title-reveal,
  .code-scroll-reveal .hero__code-line,
  .magnetic-scroll,
  .compiler-stats-reveal,
  .showcase-reveal {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
    filter: none !important;
  }
  
  .scroll-progress {
    display: none;
  }
}

/* Enhanced for modern browsers */
@supports (animation-timeline: view()) {
  .scroll-enhanced {
    will-change: transform, opacity, filter;
  }
}

/* Fallback for browsers without scroll-driven animations */
@supports not (animation-timeline: view()) {
  .scroll-stagger-cards > *,
  .stats-counter,
  .scroll-title-reveal,
  .showcase-reveal {
    opacity: 1 !important;
    transform: none !important;
    filter: none !important;
  }
}

/* ===== 0. OPTIMIZED HERO SECTION ANIMATION ===== */
.hero-epic-entrance {
  .hero__badge {
    opacity: 0;
    transform: translate3d(0, -30px, 0) scale(0.5) rotateZ(-180deg);
    will-change: opacity, transform;
    transition: opacity 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
  
  .hero__title {
    opacity: 0;
    transform: translate3d(0, 60px, 0) scale(0.9);
    will-change: opacity, transform;
    transition: opacity 1.5s cubic-bezier(0.19, 1, 0.22, 1) 0.2s,
                transform 1.5s cubic-bezier(0.19, 1, 0.22, 1) 0.2s;
    
    .hero__title-accent {
      transform: translate3d(-100px, 0, 0) skewX(-20deg);
      will-change: transform;
      transition: transform 1.8s cubic-bezier(0.23, 1, 0.32, 1) 0.4s;
    }
  }
  
  .hero__description {
    opacity: 0;
    transform: translate3d(0, 40px, 0) rotateX(45deg);
    will-change: opacity, transform;
    transition: opacity 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) 0.6s,
                transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) 0.6s;
  }
  
  .hero__actions {
    opacity: 0;
    transform: translate3d(0, 50px, 0) scale(0.7);
    will-change: opacity, transform;
    transition: opacity 1.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.8s,
                transform 1.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.8s;
    
    .hero__cta, .hero__demo {
      transform: rotateY(90deg);
      will-change: transform;
      transition: transform 1s cubic-bezier(0.34, 1.56, 0.64, 1) 1.2s;
    }
  }
  
  .hero__code-preview {
    opacity: 0;
    transform: translate3d(100px, 0, 0) rotateY(-45deg) scale(0.5);
    will-change: opacity, transform;
    transition: opacity 1.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.4s,
                transform 1.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.4s;
  }
  
  &.animate-in {
    .hero__badge {
      opacity: 1;
      transform: translate3d(0, 0, 0) scale(1) rotateZ(0deg);
    }
    
    .hero__title {
      opacity: 1;
      transform: translate3d(0, 0, 0) scale(1);
      
      .hero__title-accent {
        transform: translate3d(0, 0, 0) skewX(0deg);
      }
    }
    
    .hero__description {
      opacity: 1;
      transform: translate3d(0, 0, 0) rotateX(0deg);
    }
    
    .hero__actions {
      opacity: 1;
      transform: translate3d(0, 0, 0) scale(1);
      
      .hero__cta, .hero__demo {
        transform: rotateY(0deg);
      }
    }
    
    .hero__code-preview {
      opacity: 1;
      transform: translate3d(0, 0, 0) rotateY(0deg) scale(1);
    }
  }
}