@layer reset, theme, components, animations, utilities;

@layer theme {
  :root {
    --color-primary: oklch(70% 0.15 250);
    --color-secondary: oklch(65% 0.12 280);
    --color-accent: oklch(75% 0.18 30);
    --color-background: oklch(98% 0.01 250);
    --color-surface: oklch(95% 0.02 250);
    --color-text: oklch(25% 0.05 250);
    --color-text-muted: oklch(45% 0.05 250);

    --space-xs: clamp(0.5rem, 1vw, 0.75rem);
    --space-sm: clamp(0.75rem, 2vw, 1rem);
    --space-md: clamp(1rem, 3vw, 1.5rem);
    --space-lg: clamp(1.5rem, 4vw, 2.5rem);
    --space-xl: clamp(2rem, 5vw, 4rem);

    --text-sm: clamp(0.875rem, 1.5vw, 1rem);
    --text-md: clamp(1rem, 2vw, 1.125rem);
    --text-lg: clamp(1.25rem, 3vw, 1.5rem);
    --text-xl: clamp(1.5rem, 4vw, 2rem);
    --text-2xl: clamp(2rem, 6vw, 3rem);
    --text-3xl: clamp(3rem, 8vw, 5rem);

    --radius-sm: 0.375rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;

    --shadow-sm: 0 1px 2px 0 oklch(0% 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px oklch(0% 0 0 / 0.1),
      0 2px 4px -2px oklch(0% 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px oklch(0% 0 0 / 0.1),
      0 4px 6px -4px oklch(0% 0 0 / 0.1);

    --transition-fast: 150ms ease;
    --transition-normal: 300ms ease;
    --transition-slow: 500ms ease;
  }
}

@layer components {
  .not-found-container {
    container: not-found / inline-size;
    min-height: 100vh;
    display: grid;
    place-items: center;
    padding: var(--space-md);
    background: linear-gradient(
      135deg,
      var(--color-background) 0%,
      oklch(96% 0.01 260) 100%
    );
    position: relative;
    overflow: hidden;
  }

  .not-found-content {
    container: content / inline-size;
    text-align: center;
    max-width: 600px;
    width: 100%;
    position: relative;
    z-index: 1;
  }

  .glitch-wrapper {
    position: relative;
    margin-block-end: var(--space-lg);
  }

  .glitch-text {
    font-size: var(--text-3xl);
    font-weight: 900;
    color: var(--color-text);
    position: relative;
    display: inline-block;
    letter-spacing: -0.05em;

    &::before,
    &::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    &::before {
      animation: glitch-1 2s infinite;
      color: oklch(70% 0.15 10);
      z-index: -1;
    }

    &::after {
      animation: glitch-2 2s infinite;
      color: oklch(70% 0.15 190);
      z-index: -2;
    }
  }

  .message-section {
    margin-block-end: var(--space-xl);
  }

  .not-found-title {
    font-size: var(--text-xl);
    font-weight: 700;
    color: var(--color-text);
    margin-block-end: var(--space-sm);
  }

  .not-found-description {
    font-size: var(--text-md);
    color: var(--color-text-muted);
    line-height: 1.6;
    max-width: 30ch;
    margin-inline: auto;
  }

  .interactive-elements {
    position: relative;
    margin-block-end: var(--space-xl);
  }

  .floating-shapes {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
  }

  .shape {
    position: absolute;
    border-radius: 50%;
    opacity: 0.1;
    animation: float 6s ease-in-out infinite;

    &.shape-1 {
      width: 80px;
      height: 80px;
      background: var(--color-primary);
      top: -40px;
      left: 20%;
      animation-delay: 0s;
    }

    &.shape-2 {
      width: 60px;
      height: 60px;
      background: var(--color-secondary);
      top: 20px;
      right: 10%;
      animation-delay: 2s;
    }

    &.shape-3 {
      width: 100px;
      height: 100px;
      background: var(--color-accent);
      bottom: -50px;
      left: 60%;
      animation-delay: 4s;
    }
  }

  .action-buttons {
    display: flex;
    gap: var(--space-md);
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn {
    container: button / inline-size;
    display: inline-flex;
    align-items: center;
    gap: var(--space-xs);
    padding: var(--space-sm) var(--space-md);
    border: none;
    border-radius: var(--radius-md);
    font-size: var(--text-md);
    font-weight: 600;
    text-decoration: none;
    cursor: pointer;
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;

    &::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(
        45deg,
        transparent,
        oklch(100% 0 0 / 0.1),
        transparent
      );
      transform: translateX(-100%);
      transition: transform var(--transition-normal);
    }

    &:hover::before {
      transform: translateX(100%);
    }

    &:focus-visible {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
    }
  }

  .btn-primary {
    background: var(--color-primary);
    color: white;
    box-shadow: var(--shadow-md);

    &:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    &:active {
      transform: translateY(0);
    }
  }

  .btn-secondary {
    background: var(--color-surface);
    color: var(--color-text);
    border: 1px solid oklch(85% 0.02 250);

    &:hover {
      background: oklch(90% 0.01 250);
      transform: translateY(-1px);
    }
  }

  .btn-text {
    font-weight: 600;
  }

  .btn-icon {
    font-size: 1.2em;
    transition: transform var(--transition-fast);
  }

  .btn:hover .btn-icon {
    transform: translateX(3px);
  }

  .btn-secondary:hover .btn-icon {
    transform: translateX(-3px);
  }

  .search-suggestion {
    container: search / inline-size;
  }

  .suggestion-text {
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    margin-block-end: var(--space-sm);
  }

  .search-box {
    display: flex;
    gap: var(--space-xs);
    max-width: 400px;
    margin-inline: auto;
  }

  .search-input {
    flex: 1;
    padding: var(--space-sm);
    border: 1px solid oklch(85% 0.02 250);
    border-radius: var(--radius-md);
    font-size: var(--text-md);
    background: var(--color-surface);
    color: var(--color-text);
    transition: all var(--transition-normal);

    &:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px oklch(70% 0.15 250 / 0.1);
    }

    &::placeholder {
      color: var(--color-text-muted);
    }
  }

  .search-btn {
    padding: var(--space-sm);
    background: var(--color-primary);
    color: white;
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);

    &:hover {
      background: oklch(65% 0.15 250);
      transform: scale(1.05);
    }

    &:focus-visible {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
    }
  }

  /* Container Query Responsive Design */
  @container content (min-width: 400px) {
    .not-found-title {
      font-size: var(--text-2xl);
    }

    .not-found-description {
      max-width: 40ch;
    }
  }

  @container content (min-width: 500px) {
    .action-buttons {
      flex-direction: row;
    }

    .search-box {
      flex-direction: row;
    }
  }

  @container button (min-width: 200px) {
    .btn {
      padding: var(--space-md) var(--space-lg);
    }
  }

  @container not-found (min-width: 768px) {
    .not-found-container {
      padding: var(--space-xl);
    }

    .glitch-text {
      font-size: clamp(5rem, 15vw, 8rem);
    }
  }
}

@layer animations {
  @keyframes glitch-1 {
    0%,
    14%,
    15%,
    49%,
    50%,
    99%,
    100% {
      transform: translate(0);
    }
    15% {
      transform: translate(-2px, 2px);
    }
    50% {
      transform: translate(2px, -2px);
    }
  }

  @keyframes glitch-2 {
    0%,
    20%,
    21%,
    62%,
    63%,
    99%,
    100% {
      transform: translate(0);
    }
    21% {
      transform: translate(2px, -2px);
    }
    63% {
      transform: translate(-2px, 2px);
    }
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }
    33% {
      transform: translateY(-20px) rotate(5deg);
    }
    66% {
      transform: translateY(10px) rotate(-5deg);
    }
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .glitch-text::before,
    .glitch-text::after,
    .shape,
    .btn::before {
      animation: none;
    }

    .btn:hover {
      transform: none;
    }
  }
}

@layer utilities {
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  :root {
    --color-background: oklch(15% 0.02 250);
    --color-surface: oklch(25% 0.03 250);
    --color-text: oklch(95% 0.01 250);
    --color-text-muted: oklch(75% 0.02 250);
  }

  .not-found-container {
    background: linear-gradient(
      135deg,
      var(--color-background) 0%,
      oklch(20% 0.02 260) 100%
    );
  }
}
